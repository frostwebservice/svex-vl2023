import{u as v,b as y,r as C,p as l,c as k,j as a,F as S,d as e,S as P,C as T,k as m,L as A,R as B,e as G,l as o,B as u,D as h,f as g,T as p,i as L}from"./app-d2e90dc3.js";import{c as W,a as b}from"./index.esm-0abc412e.js";import{u as E}from"./formik.esm-a22de33f.js";import{u as F}from"./use-search-params-94ebabb8.js";import{A as I}from"./auth-issuer-2b3939c6.js";import{C as q}from"./CardHeader-8256efbe.js";import{A as z}from"./Alert-8b255fa4.js";import"./Close-df177b7f.js";const R={email:"demo@devias.io",password:"Password123!",submit:null},j=W({email:b().email("Must be a valid email").max(255).required("Email is required"),password:b().max(255).required("Password is required")}),N=()=>{const s=v(),t=F().get("returnTo"),{issuer:x,signInWithEmailAndPassword:f,signInWithGoogle:d}=y(),r=E({initialValues:R,validationSchema:j,onSubmit:async(i,n)=>{try{await f(i.email,i.password),s()&&(window.location.href=t||l.dashboard.index)}catch(c){console.error(c),s()&&(n.setStatus({success:!1}),n.setErrors({submit:c.message}),n.setSubmitting(!1))}}}),w=C.useCallback(async()=>{try{await d(),s()&&(window.location.href=t||l.dashboard.index)}catch(i){console.error(i)}},[d,s,t]);return k(),a(S,{children:[e(P,{title:"Login"}),a("div",{children:[a(T,{elevation:16,children:[e(q,{subheader:a(m,{color:"text.secondary",variant:"body2",children:["Don't have an account? Â ",e(A,{component:B,href:l.auth.firebase.register,underline:"hover",variant:"subtitle2",children:"Register"})]}),sx:{pb:0},title:"Log in"}),e(G,{children:a("form",{noValidate:!0,onSubmit:r.handleSubmit,children:[a(o,{sx:{flexGrow:1,mt:3},children:[a(u,{fullWidth:!0,onClick:w,size:"large",sx:{backgroundColor:"common.white",color:"common.black","&:hover":{backgroundColor:"common.white",color:"common.black"}},variant:"contained",children:[e(o,{alt:"Google",component:"img",src:"/assets/logos/logo-google.svg",sx:{mr:1}}),"Google"]}),a(o,{sx:{alignItems:"center",display:"flex",mt:2},children:[e(o,{sx:{flexGrow:1},children:e(h,{orientation:"horizontal"})}),e(m,{color:"text.secondary",sx:{m:2},variant:"body1",children:"OR"}),e(o,{sx:{flexGrow:1},children:e(h,{orientation:"horizontal"})})]})]}),a(g,{spacing:3,children:[e(p,{error:!!(r.touched.email&&r.errors.email),fullWidth:!0,helperText:r.touched.email&&r.errors.email,label:"Email Address",name:"email",onBlur:r.handleBlur,onChange:r.handleChange,type:"email",value:r.values.email}),e(p,{error:!!(r.touched.password&&r.errors.password),fullWidth:!0,helperText:r.touched.password&&r.errors.password,label:"Password",name:"password",onBlur:r.handleBlur,onChange:r.handleChange,type:"password",value:r.values.password})]}),r.errors.submit&&e(L,{error:!0,sx:{mt:3},children:r.errors.submit}),e(o,{sx:{mt:2},children:e(u,{disabled:r.isSubmitting,fullWidth:!0,size:"large",type:"submit",variant:"contained",children:"Log In"})})]})})]}),a(g,{spacing:3,sx:{mt:3},children:[e(z,{severity:"error",children:a("div",{children:["You can use ",e("b",{children:"demo@devias.io"})," and password ",e("b",{children:"Password123!"})]})}),e(I,{issuer:x})]})]})]})};export{N as default};
