import{c as L,a as h}from"./index.esm-d9506663.js";import{u as k,r as o,b as N,H as B,j as s,F as I,d as a,S as P,l as p,L as d,R as T,J as F,K as z,k as g,C as j,p as u,e as q,f as E,T as f,B as M,M as R}from"./app-51ffe495.js";import{u as A}from"./formik.esm-cf666fb2.js";import{u as D}from"./use-search-params-3696ab0e.js";/* empty css             */import{C as V}from"./CardHeader-dbda5e40.js";const W=L({email:h().email("Must be a valid email").max(255).required("Email is required"),password:h().max(255).required("Password is required")}),U=()=>{const c=k(),x=D().get("returnTo"),[b,r]=o.useState(!1),[w,t]=o.useState("Log In"),{signIn:v}=N(),[y,C]=o.useState({email:"",password:""}),l=B(),e=A({initialValues:y,validationSchema:W,onSubmit:n=>{r(!0),t(""),setTimeout(()=>{axios.post("/api/user-signin",n).then(i=>{if(i.data.status===200){C({email:"",password:""}),t("Log In"),r(!1);async function S(){try{await v(n.email,n.password,i.data.data),c()&&l(x||u.dashboard.index)}catch(m){console.error(m),c()&&(helpers.setStatus({success:!1}),helpers.setErrors({submit:m.message}),helpers.setSubmitting(!1))}}S(),t("Log in"),r(!1)}i.data.status==="failed"&&(t("Log In"),r(!1),alert(i.data.message))})},2e3)}});return s(I,{children:[a(P,{title:"Login"}),s("div",{style:{width:"620px",margin:"auto"},children:[a(p,{sx:{mb:2},children:s(d,{color:"text.primary",component:T,href:"/Dashboard",sx:{alignItems:"center",display:"inline-flex"},underline:"hover",children:[a(F,{sx:{mr:1},children:a(z,{})}),a(g,{variant:"body1",sx:{color:"rgba(0, 0, 0, 0.87)"},children:"Dashboard"})]})}),s(j,{sx:{borderRadius:2.5},className:"mainCard card  px-4 pt-4 pb-3",children:[a(V,{subheader:s(g,{className:"title-inter smallsize",color:"text.secondary",children:["Don't have an account? Â ",a(d,{underline:"hover",className:"title-inter smallsize",onClick:()=>l(u.auth.auth.signup),children:"Register"})]}),sx:{pb:0},className:"title  smalltitle",title:"Log in"}),a(q,{children:s("form",{noValidate:!0,onSubmit:e.handleSubmit,children:[s(E,{spacing:3,children:[a(f,{className:"title-inter mt-4",variant:"filled",sx:{mt:1.5},autoFocus:!0,error:!!(e.touched.email&&e.errors.email),fullWidth:!0,helperText:e.touched.email&&e.errors.email,label:"Email Address",name:"email",onBlur:e.handleBlur,onChange:e.handleChange,type:"email",value:e.values.email}),a(f,{className:"title-inter mt-4",variant:"filled",sx:{mt:1.5},error:!!(e.touched.password&&e.errors.password),fullWidth:!0,helperText:e.touched.password&&e.errors.password,label:"Password",name:"password",onBlur:e.handleBlur,onChange:e.handleChange,type:"password",value:e.values.password})]}),s(M,{fullWidth:!0,size:"large",sx:{mt:5},type:"submit",color:"primary",variant:"contained",className:"title-inter smallsize mainButton background-blue",children:[s("span",{className:"ml-2",children:[" ",w," "]}),b?a(R,{color:"inherit",size:"2rem"}):a("span",{})]}),a(p,{sx:{display:"flex",justifyContent:"center",mt:3},children:a(d,{underline:"hover",variant:"subtitle2",onClick:()=>l(u.auth.auth.forgotPassword),children:"Forgot password?"})})]})})]})]})]})};export{U as default};
