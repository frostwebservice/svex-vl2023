import{c as N,a as p}from"./index.esm-0abc412e.js";import{u as k,r as o,b as B,o as I,j as s,F as P,d as a,S as R,l as g,L as d,R as T,q,A as F,k as f,C as j,p as m,e as A,f as E,B as z,s as D}from"./app-d2e90dc3.js";import{u as M}from"./formik.esm-a22de33f.js";import{u as V}from"./use-search-params-94ebabb8.js";import{R as x}from"./TextfieldStyle-62c86472.js";/* empty css             */import{C as W}from"./CardHeader-8256efbe.js";const X=()=>{const b=N({email:p().email("Must be a valid email").max(255).required("Email is required"),password:p().max(255).required("Password is required")}),c=k(),w=V().get("returnTo"),[v,r]=o.useState(!1),[C,t]=o.useState("Log In"),{signIn:y}=B(),[u,S]=o.useState({email:"",password:"",type:"Credential login"}),l=I(),e=M({initialValues:u,validationSchema:b,onSubmit:n=>{r(!0),t(""),axios.post("/api/user-signin",n).then(i=>{if(i.data.status===200){S({...u,email:"",password:""}),t("Log In"),r(!1);async function L(){try{await y(n.email,n.password,i.data.data),c()&&l(w||m.dashboard.index)}catch(h){console.error(h),c()&&(helpers.setStatus({success:!1}),helpers.setErrors({submit:h.message}),helpers.setSubmitting(!1))}}L(),t("Log in"),r(!1)}i.data.status==="failed"&&(t("Log In"),r(!1),alert(i.data.message))})}});return s(P,{children:[a(R,{title:"Login"}),s("div",{className:"signup-page",children:[a(g,{sx:{mb:2},children:s(d,{color:"text.primary",component:T,href:"/Dashboard",sx:{alignItems:"center",display:"inline-flex"},underline:"hover",children:[a(q,{sx:{mr:1},children:a(F,{})}),a(f,{color:"text.primary",variant:"body1",children:"Dashboard"})]})}),s(j,{sx:{borderRadius:2.5},elevation:16,className:"mainCard card  px-4 pt-4 pb-3",children:[a(W,{subheader:s(f,{className:"title-inter",color:"text.secondary",children:["Don't have an account? Â ",a(d,{underline:"hover",className:"title-inter pointer",onClick:()=>l(m.auth.auth.signup),children:"Register"})]}),sx:{pb:0},className:"title  smalltitle signup-form-title",title:"Log in"}),a(A,{className:"signup-form",children:s("form",{noValidate:!0,onSubmit:e.handleSubmit,children:[s(E,{spacing:3,children:[a(x,{className:"title-inter mt-3",variant:"filled",error:!!(e.touched.email&&e.errors.email),fullWidth:!0,helperText:e.touched.email&&e.errors.email,label:"Email Address",name:"email",onBlur:e.handleBlur,onChange:e.handleChange,type:"email",value:e.values.email}),a(x,{className:"title-inter mt-3",variant:"filled",error:!!(e.touched.password&&e.errors.password),fullWidth:!0,helperText:e.touched.password&&e.errors.password,label:"Password",name:"password",autoComplete:"new password",onBlur:e.handleBlur,onChange:e.handleChange,type:"password",value:e.values.password})]}),s(z,{fullWidth:!0,size:"large",sx:{mt:5},type:"submit",color:"primary",variant:"contained",className:"title-inter smallsize mainButton background-blue",children:[s("span",{className:"ml-2",children:[" ",C," "]}),v?a(D,{color:"inherit",size:"2rem"}):a("span",{})]}),a(g,{sx:{display:"flex",justifyContent:"center",mt:3},children:a(d,{underline:"hover",className:"pointer",variant:"subtitle2",onClick:()=>l(m.auth.auth.forgotPassword),children:"Forgot password?"})})]})})]})]})]})};export{X as default};
