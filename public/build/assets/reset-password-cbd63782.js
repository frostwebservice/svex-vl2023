import{c as p,a as t,d as f}from"./index.esm-35eaacc5.js";import{u as w}from"./formik.esm-9eb0d759.js";import{X as b}from"./mui-one-time-password-input.es-1a2c4313.js";import{u as C,a as g,b as x,c as v,j as s,F as P,d as r,S as y,C as F,e as S,f as B,T as i,g as R,h as q,i as u,B as T,l as k,L as V,R as M,p as m}from"./app-0b1a94df.js";import{u as W}from"./use-search-params-95bae2a5.js";import{C as j}from"./CardHeader-b4d725f1.js";const E=o=>({code:"",email:o||"",password:"",passwordConfirm:"",submit:null}),L=p({code:t().min(6).max(6).required("Code is required"),email:t().email("Must be a valid email").max(255).required("Email is required"),password:t().min(7,"Must be at least 7 characters").max(255).required("Required"),passwordConfirm:t().oneOf([f("password")],"Passwords must match").required("Required")}),X=()=>{const o=C(),c=g(),d=W().get("username")||void 0,{forgotPasswordSubmit:h}=x(),e=w({enableReinitialize:!0,initialValues:E(d),validationSchema:L,onSubmit:async(a,l)=>{try{await h(a.email,a.code,a.password),o()&&c.push(m.auth.amplify.login)}catch(n){console.error(n),o()&&(l.setStatus({success:!1}),l.setErrors({submit:n.message}),l.setSubmitting(!1))}}});return v(),s(P,{children:[r(y,{title:"Reset Password"}),r("div",{children:s(F,{elevation:16,children:[r(j,{sx:{pb:0},title:"Reset Password"}),r(S,{children:s("form",{noValidate:!0,onSubmit:e.handleSubmit,children:[s(B,{spacing:3,children:[d?r(i,{disabled:!0,fullWidth:!0,label:"Email",value:d}):r(i,{autoFocus:!0,error:!!(e.touched.email&&e.errors.email),fullWidth:!0,helperText:e.touched.email&&e.errors.email,label:"Email Address",name:"email",onBlur:e.handleBlur,onChange:e.handleChange,type:"email",value:e.values.email}),s(R,{error:!!(e.touched.code&&e.errors.code),children:[r(q,{sx:{display:"block",mb:2},children:"Verification code"}),r(b,{length:6,onBlur:()=>e.handleBlur("code"),onChange:a=>e.setFieldValue("code",a),onFocus:()=>e.setFieldTouched("code"),sx:{"& .MuiFilledInput-input":{p:"14px"}},value:e.values.code}),!!(e.touched.code&&e.errors.code)&&r(u,{children:e.errors.code})]}),r(i,{error:!!(e.touched.password&&e.errors.password),fullWidth:!0,helperText:e.touched.password&&e.errors.password,label:"Password",name:"password",onBlur:e.handleBlur,onChange:e.handleChange,type:"password",value:e.values.password}),r(i,{error:!!(e.touched.passwordConfirm&&e.errors.passwordConfirm),fullWidth:!0,helperText:e.touched.passwordConfirm&&e.errors.passwordConfirm,label:"Password Confirmation",name:"passwordConfirm",onBlur:e.handleBlur,onChange:e.handleChange,type:"password",value:e.values.passwordConfirm})]}),e.errors.submit&&r(u,{error:!0,sx:{mt:3},children:e.errors.submit}),r(T,{disabled:e.isSubmitting,fullWidth:!0,size:"large",sx:{mt:3},type:"submit",variant:"contained",children:"Reset Password"}),r(k,{sx:{display:"flex",justifyContent:"center",mt:3},children:r(V,{component:M,href:m.auth.amplify.forgotPassword,underline:"hover",variant:"subtitle2",children:"Did you not receive the code?"})})]})})]})})]})};export{X as default};
